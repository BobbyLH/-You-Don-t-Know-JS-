# “类”与对象的混合(Mixing Up "Class" Objects)

根据过往的经验，我们很容易将“面向对象”(object orientation)的思想，关联到“面向类”(class orientation)上 —— 实例化(instantiation)、继承(inheritance)、多态(polymorphism) —— 但这些面向类的思想 *映射(map)* 在JS的对象机制中时，并不太自然。

## 类的理论(Class Theory)
“类/继承” 描述某种代码的组织和架构形态 —— 是一种在软件世界中模拟现实世界面临的实际的问题的一种方法。

面向对象/类的编程语言强调的是根据数据的不同的类型和特性，将数据从本质上和行为关联起来，以此将数据和行为合理的打包、封装在一起。在计算机科学领域，这被称为“数据结构”(data structures)。

例如，有一系列用来代表单词或词组的 字符(characters) 通常被称为 “字符串”(string)。这些 字符(characters) 就是数据，但你关心的只是如何操作这些数据，而不是数据本身。因此一些操作数据(字符)的行为，都被设计成 `String` 类的方法。而所有给定的字符串，都是这个类的实例，这也意味着它不仅包含了字符数据，也能执行相应的方法功能。

类也是一种对数据结构的分类 —— 将任何一种数据结构看做是一个更通用定义下，某个特定的变体。举个例子，汽车类可以被看成是交通工具类的一个特殊的实现。而交通工具类的定义应该具有推进器、载人能力等功能 —— 它应该是其他交通工具(飞机、轮船、火车)所共同具有的特征。

而一旦定义好了交通工具类，汽车类则只需要继承它，而不需要再重复的去定义诸如 “载人能力” 等功能。而实例化的汽车则只需要譬如唯一的 VIN 码之类的数据即可。

另一个类的关键概念是 多态，它描述的是子类能够重写父类的同名方法。实际上，相对的多态能够既让我们使用基本的父类行为的同时，还能自定义子类的其他行为。但在JS代码中实现这些功能，可能会让你迷惑，且又让代码变得脆弱。

### “类”的设计模式("Class" Design Pattern)
你或许从未想过将 “类” 做为一种设计模式，毕竟我们通常讨论的都是面向对象的设计模式，譬如 “迭代器模式”、“观察者模式”、“工厂模式”、“单例模式”……大多数的假设都认为 面向对象的类 是实现高级设计模式的基础，就好像面向对象是所有代码的基础一样。

面向过程编程 同样也是一种编程的范式 —— 没有高级的抽象，只是由调用函数的过程所组成 —— 你可能会认为 类 是解决这些 “意大利面条代码(spaghetti code)” 的良方。你可能知道 函数式编程，明白 类 只是常见的程序设计的一种，但对于其他人来讲，这可能是你问自己的一次好机会：类是否真的是所有代码的基础？还是它只是一种的可选抽象模式。

有些编程语言没得选，比如Java —— everything's a class。另一些语言，比如 C++ 和 PHP，同时提供了面向过程和面向对象的语法，从而让开发者能够选择合适的模式。

### JS中的类(Javascript "Classes")
JS中有很多关于类的语法，比如 `new` 和 `instanceof`，并且在ES6中还新增了关键字 `class` 等。但这就意味着JS中真正存在类么？简单明了 —— 没有。

JS仅仅通过一系列的形似 “类” 的语法，来满足进行 “类” 设计的需求，但并没有真正支持 “类” 的机制 —— 语法糖和广泛使用的 “类” 库好像隐藏了这一切，但在底层，无论是构建“类”还是操作“类”的机制都和其他拥有“类”的语言完全不同。

## 类的机制(Class Mechanics)
