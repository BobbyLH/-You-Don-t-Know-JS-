# ES? Now & Future(ES? 现在 & 未来)
从 ES3 到 ES5，整整花了10年；从 ES5 到 ES6 间隔了6年；但从 ES6 开始，每隔一年都会发布一个新的版本 —— 不难看出，进入快车道发展的 Javascript 一定会变得越来越好。

虽然时隔已久，但在作者看来，ES6 对于 JS 的开发者来说，是一个激进的跳跃 —— 不仅仅是增加了几个新的 API 那么简单，更涉及到新的数据类型和语法，以及代码的组织形式……


## Versioning(版本)
ECMAScript(简称ES)，是 Javascript 标准规范的官方全称。至于紧随其后的数字，譬如 ES5、ES6，则是按顺序自增的版本号 —— ES5 代表第五版标准规范。

至于最早的版本ES1、ES2，其实并没有被广泛的采纳并使用。直到 ES3 规范，才算得上较为广泛被采用的一个版本 —— 那时候还是IE6 - 8、Android 2.x 等浏览器的时代。至于 ES4 据说是因为政治上的原因并未实际的出现过，在此不多做讨论。

时间到了 2009 年，ES5 被官方定稿(在 2011 年有一个补充版 ES5.1)，至此，ES规范正式成为现代浏览器的JS标准，被各种浏览器(FireFox、Chrome、Opera、Safari……)广泛采用。

2015年众望所归的 ES6(ES2015) 终于问世，一大波革命性的变化由此拉开帷幕。并且随之而来的是一年一次更新的节奏(ES2016 ~ ESNext)，而且到近来发现，一些新的特性一经提案，哪怕仅仅是 stage-1、stage-2 的提案，也会很快被先行一步的工具(Babel)所支持，甚至某些浏览器先驱中的 Experimental Features 所覆盖，即便在规范还没正式落地，大部分浏览器还未能支持的情况下，也能让JS的开发者从中获益。

至于说之前 *基于一堆任意新特性的集合* 的版本号，甚至是 *基于年份* 的版本号，兴许在未来都会变成 *基于特性* 的版本号也未尝可知。

JS 迭代的脚步越来越快，与其关注你的代码是基于某个版本号的，不如多花点心思在了解并采用那些优秀的新特性上面。

## Transpiling(转译)
新特性的采用和宿主环境(浏览器)兼容性共存的问题，一直以来困扰着广大的 JS 开发者。就拿ES5的 `strict` mode 为例，几乎是要到作者成书之际，这个特性才被大部分宿主环境支持，而这已经是在其推出了五年之后了。

而转译器的出现，就是为了解决这个问题：让 JS 开发者，在即便是大部分的宿主环境都不支持的情况下，提前在他们的代码中，使用新特性带来的各种好处。

这种所谓的转译，即转换+编译，即将 ESNext 的语法标准，转译成大部分宿主环境都支持的语法标准，比如 ES5。

例如，对 ES6 中的 *对象属性同名缩写* 的转译：

```js
var foo = [1, 2, 3];

var obj = { foo };

obj.foo; // [1, 2, 3]
```

大致转译成：

```js
var foo = [1, 2, 3];

var obj = { foo: foo };

obj.foo; // [1, 2, 3]
```

通常情况下，这一过程都发生在代码的构建阶段，伴随着 格式规范检查(linting)、压缩代码(minification) 等类似的步骤一起完成。

### Shims/Polyfills(垫片)
垫片，是另一种解决兼容性的思路，这样做的好处是能够动态的支持新的 API，而不是将它们在编译阶段就完全替换成兼容的 API。当然，新的语法只能通过转译阶段进行转换。

比如对于 `Object.is(…)` 的支持：

```js
if (!Object.is) {
  Object.is = function(x, y) {
    if (x === 0 && y === 0) {
      return 1 / x === 1 / y;
    }

    // NaN
    if (x !== x) {
      return y !== y;
    }

    return x === y;
  };
}
```

**Tips**：注意 `if` 这个条件判断，即所谓的防御式编程，它能保证只有当宿主环境没有 `Object.is` 这个 API 的时候，才会进行垫片，即意味着它不会覆写已经存在的 API。

我猜，现在应该已经没有人会傻等到，所有的新特性都被宿主环境支持后，才开始尝试使用它们吧？通过 [Babel](https://babeljs.io/) 搭配各种构建工具如 webpack、rollup、gulp、vite 等等，在你的代码中用上哪怕处于 stage-0 的特性，也绝非什么难事。

## Review(回顾)
随着 JS 周边生态不断完善，各种构建编译的工具能让我们以较低成本，保持紧随前沿进展，使用上那些能让我们代码变得更为简洁、高效，且更具鲁棒性(robust)的新特性。

一个新特新要等到所有的浏览器都支持，才尝试去使用的年底已然过去，没有人也不应该有人还继续这么傻干。

